<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Datum- en Tijdselector met OK-knop</title>
    <style>
        /* Stijlen voor de modal */
        .modal {
            display: none; /* Verborgen standaard */
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto; /* Scrollen indien nodig */
            background-color: rgba(0,0,0,0.4); /* Achtergrond met transparantie */
        }

        /* Inhoud van de modal */
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 400px;
        }

        /* Sluitknop */
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

            .close:hover,
            .close:focus {
                color: black;
                text-decoration: none;
            }

        /* Stijlen voor inputs en knop */
        .modal input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
        }

        .modal button {
            width: 100%;
            padding: 10px;
            background-color: #4CAF50;
            border: none;
            color: white;
            font-size: 16px;
            cursor: pointer;
        }

            .modal button:hover {
                background-color: #45a049;
            }
    </style>
</head>
<body>

    <h2>Datum- en Tijdselector met OK-knop</h2>

    <!-- Inputveld om geselecteerde datum en tijd weer te geven -->
    <input type="text" id="datetimeInput" placeholder="Selecteer datum en tijd" readonly>

    <!-- De Modal -->
    <div id="datetimeModal" class="modal">

        <!-- Inhoud van de modal -->
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Selecteer Datum en Tijd</h3>
            <input type="date" id="datePicker">
            <input type="time" id="timePicker">
            <button id="okButton">OK</button>
        </div>

    </div>

    <script>
        // Verkrijg de modal
        var modal = document.getElementById("datetimeModal");

        // Verkrijg het inputveld dat de modal opent
        var input = document.getElementById("datetimeInput");

        // Verkrijg het <span> element dat de modal sluit
        var span = document.getElementsByClassName("close")[0];

        // Verkrijg de OK-knop
        var okButton = document.getElementById("okButton");

        // Wanneer de gebruiker op het inputveld klikt, open de modal
        input.onclick = function() {
          modal.style.display = "block";
        }

        // Wanneer de gebruiker op <span> (x) klikt, sluit de modal
        span.onclick = function() {
          modal.style.display = "none";
        }

        // Wanneer de gebruiker op de OK-knop klikt, stel de datum en tijd in en sluit de modal
        okButton.onclick = function() {
          var date = document.getElementById("datePicker").value;
          var time = document.getElementById("timePicker").value;

          if (date && time) {
            input.value = date + " " + time;
          } else if (date) {
            input.value = date;
          } else if (time) {
            input.value = time;
          }

          modal.style.display = "none";
        }
    </script>
    <script>
        // Functie om een modal te openen
        function openModal(inputId, modalId) {
            var input = document.getElementById(inputId);
            var modal = document.getElementById(modalId);

            input.addEventListener('click', function () {
                modal.style.display = 'block';
            });
        }

        // Functie om een modal te sluiten
        function closeModal(modalId) {
            var modal = document.getElementById(modalId);
            modal.style.display = 'none';
        }

        // Functie om datum en tijd in het inputveld te zetten en de modal te sluiten
        function setDateTime(inputId, datePickerId, timePickerId, okButtonId, modalId) {
            var input = document.getElementById(inputId);
            var datePicker = document.getElementById(datePickerId);
            var timePicker = document.getElementById(timePickerId);
            var okButton = document.getElementById(okButtonId);

            okButton.addEventListener('click', function () {
                var date = datePicker.value;
                var time = timePicker.value;

                if (date && time) {
                    input.value = date + 'T' + time;
                } else if (date) {
                    input.value = date;
                } else if (time) {
                    input.value = time;
                }

                closeModal(modalId);
            });
        }

        // Functie om sluitknoppen te initialiseren
        function initCloseButtons() {
            var closeButtons = document.getElementsByClassName('close');
            for (var i = 0; i < closeButtons.length; i++) {
                var button = closeButtons[i];
                var modalId = button.getAttribute('data-modal');
                button.addEventListener('click', function () {
                    closeModal(this.getAttribute('data-modal'));
                });
            }
        }

        // Initialiseer de modals en knoppen
        document.addEventListener('DOMContentLoaded', function () {
            // Voor ActivityDate
            openModal('activityDateInput', 'activityDateModal');
            setDateTime('activityDateInput', 'activityDatePicker', 'activityTimePicker', 'activityOkButton', 'activityDateModal');

            // Voor EndDate
            openModal('endDateInput', 'endDateModal');
            setDateTime('endDateInput', 'endDatePicker', 'endTimePicker', 'endOkButton', 'endDateModal');

            // Sluitknoppen initialiseren
            initCloseButtons();

            // Sluit de modal als er buiten de modal wordt geklikt
            window.addEventListener('click', function (event) {
                if (event.target.classList.contains('modal')) {
                    event.target.style.display = 'none';
                }
            });
        });
    </script>

</body>
</html>
